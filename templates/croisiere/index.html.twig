{% extends 'template.html.twig' %}

{% block title %}Croisiere index{% endblock %}
{% block stylesheets %}
	<link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="stylesheet"/>
	<script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
{% endblock %}
{% block body %}
    {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_AGENT') %}
		<div class="d-flex justify-content-end">
			<a href="{{ path('app_croisiere_new') }}" class="btn btn-primary">
				<i class="fa-solid fa-circle-plus"></i>
				<span class="ms-2">Ajouter</span>
			</a>
		</div>
	{% endif %}
    <h1>La liste des croisieres</h1>
    <div id="layoutSidenav_content">
		<main>
			<div class="container-fluid px-4">
				<div class="card mb-4">
					<div class="card-body">
                        <table  id="datatablesSimple">
                            <thead>
                                <tr>
                                    <th>Id</th>
                                    <th>Title</th>
                                    <th>Destination</th>
                                    <th>Cat√©gorie</th>
                                    <th>Agence</th>
                                    <th>Image</th>
                                    <th>actions</th>
                                </tr>
                            </thead>
                            <tbody>
                            {% for croisiere in croisieres %}
                                <tr>
                                    <td>{{ croisiere.id }}</td>
                                    <td>{{ croisiere.title }}</td>
                                    <td>{{ croisiere.destination.name }}</td>
                                    <td>{{ croisiere.categorie}}</td>
                                    <td>{{ croisiere.agence.name }}</td>
                                    {# <td>
                                        {% for e in croisiere.excursion %}
                                            <li>{{ e.title }}</li>
                                        {% endfor %}
                                    </td> #}
                                    <td>
											{% if croisiere.image is not null %}
												<img src="{{ asset('uploads/' ~ croisiere.image) }}" alt="Image" width="50">
											{% else %}
												<span>Aucune image disponible</span>
											{% endif %}
									</td>
                                    <td>
                                        <div class="d-inline-flex">
												
													<a href="{{ path('app_croisiere_edit', {'id': croisiere.id}) }}">
														<i class="fa-solid fa-pen-to-square" style="margin-right: 30px;"></i>
													</a>
                                                {% if is_granted('ROLE_ADMIN') %}    
													{{ include('croisiere/_delete_form.html.twig') }}
												{% endif %}
											</div>
                                    </td>
                                </tr>
                            {% else %}
                                <tr>
                                    <td colspan="9">no records found</td>
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
				</div>
			</div>
		</main>
	</div>

{% endblock %}
{% block javascripts %}
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
	<script src="{{ asset ('assets/js/scripts.js') }}"></script>
	<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
	<script src="{{ asset ('assets/js/datatables-simple-demo.js') }}"></script>
{% endblock %}
