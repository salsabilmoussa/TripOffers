{% extends 'template.html.twig' %}

{% block title %}Agent index
{% endblock %}
{% block stylesheets %}
	<link href="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/style.min.css" rel="categorystylesheet"/>
	<script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
{% endblock %}

{% block body %}
	<div class="d-flex justify-content-end">

		<a href="{{ path('app_agent_new') }}" class="btn btn-primary">
			<i class="fa-solid fa-circle-plus"></i>
			<span class="ms-2">Ajouter</span>
		</a>
	</div>
	<h1>La liste des agents</h1>
	<div id="layoutSidenav_content">
		<main>
			<div class="container-fluid px-4">
				<div class="card mb-4">
					<div class="card-body">
						<table id="datatablesSimple">
							<thead>
								<tr>
									<th>Id</th>
									<th>Email</th>
                                    <th>Agence</th>
									<th>IsVerified</th>
									<th>actions</th>
								</tr>
							</thead>
							<tbody>
								{% for agent in agents %}
									<tr>
										<td>{{ agent.id }}</td>
										<td>{{ agent.email }}</td>
                                        <td>{{ agent.agence.name }}</td>
										<td>{{ agent.isVerified ? 'Yes' : 'No' }}</td>
										<td>
											<div class="d-inline-flex">
											{% if is_granted('ROLE_ADMIN') %}
												<a href="{{ path('app_agent_edit', {'id': agent.id}) }}">
													<i class="fa-solid fa-pen-to-square" style="margin-right: 6px;"></i>
												</a>
												{{ include('agent/_delete_form.html.twig') }}
											{% endif %}
											</div>
										</td>
									</tr>
								{% else %}
									<tr>
										<td colspan="6">no records found</td>
									</tr>
								{% endfor %}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</main>
	</div>


{% endblock %}
{% block javascripts %}
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
	<script src={{ asset ('assets/js/scripts.js') }}></script>
	<script src="https://cdn.jsdelivr.net/npm/simple-datatables@7.1.2/dist/umd/simple-datatables.min.js" crossorigin="anonymous"></script>
	<script src={{ asset ('assets/js/datatables-simple-demo.js') }}></script>

{% endblock %}
